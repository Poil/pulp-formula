
Pulp
==================================

This formula installs and configures the Pulp Repository management service.

At the moment it can only configure the server, and not the clients.

Sample pillars
==============

Server
------

```yaml
pulp:
  server:
    enabled: true
    filesystems:
      enabled: true
      vg_name: sys
      pulp_size: 50G
      mongo_size: 15G
      fs_type: xfs
    admin:
      enabled: true
      hostname: pulp.example.com
      verify_ssl: true
      username: admin
      password: admin
    repositories: 
      - id: centos-7-os
        type: rpm
        feed: http://mirror.0x.sg/centos/7.5.1804/os/x86_64/
        relative_url: centos/7/os
      - id: epel-7
        type: rpm
        feed: http://sg.fedora.ipserverone.com/epel/7/x86_64/
        relative_url: epel/7
```

Example above will create:
* File systems
  * Logical volume `mongo` with size of 15GB
  * Format it as XFS filesystem
  * Mount it under `/var/lib/mongodb`
  * Logical volume `pulp` with size of 50GB
  * Format it as XFS filesystem
  * Mount it under `/var/lib/pulp`
* Server
  * Install all server packages and plugins
  * Generate certificates and GPG keys
  * Run database migrations
  * Start all Pulp services
* Admin
  * Install all admin client packages and plugins
  * Configure admin client host settings
  * Username and password are used only for creating repositories
* Repositories
  * Create defined repositories
  * If `feed` is set for a given respotitory, run sync
  * If a `relative_url` is not set for a given repository, it will be generated by replacing all ocurrances of `-` with `/`. E.g. `centos-7-os` becomes `centos/7/os`.

Read more
=========

* https://docs.pulpproject.org/index.html


Licence (See LICENSE file for full license)
===========================================

Copyright 2018 Fairtide Pte. Ltd.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
